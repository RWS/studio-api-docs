<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Processing custom project package formats </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Processing custom project package formats ">
    
    
      <link rel="shortcut icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../styles/docfx.css">
      <link rel="stylesheet" href="../../styles/main.css">
      <meta property="docfx:navrel" content="../../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>        

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="https://developers.rws.com/">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <span class="glyphicon glyphicon-search search-icon"></span>
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>

        <div class="container body-content">

          <div id="search-results">
            <div class="search-list">Search Results for <span></span></div>
            <div class="sr-items">
              <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
            </div>
            <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
          </div>
        </div>

      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="processing-custom-project-package-formats">Processing custom project package formats</h1>

<p>Trados Studio Integration API provides support for third-party developers to transform third-party packages into a format that Trados Studio can work with.
This page will describe the steps required to create a custom package converter.</p>
<h2 id="declaring-a-custom-package-converter">Declaring a custom package converter</h2>
<p>The first step in creating a custom package converter is the declaration:</p>
<ul>
<li><p>Create a class that implements <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Packaging.IExternalPackageConverter.html">IExternalPackageConverter</a> interface and provide specific implementations for the following methods:</p>
<table>
<thead>
<tr>
<th>Method Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ConvertPackage</code></td>
<td>This method allows implementing logic that will transform a third party package format into a format recognised by Trados Studio.</td>
</tr>
<tr>
<td><code>ConvertReturnPackage</code></td>
<td>This method allows conversion from the Trados Studio return package format into the third party package format.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Decorate the class with the <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Extensions.ExternalPackageConvertorExtensionAttribute.html">ExternalPackageConvertorExtension</a> attribute.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Id</code></td>
<td>Unique identifier for the converter. To avoid confusion with other third party plugins we recommend using a combination of the project namespace and class name.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td>Name of the converter</td>
</tr>
<tr>
<td><code>Description</code></td>
<td>Description for the converter</td>
</tr>
<tr>
<td><code>PackageFileFilter</code></td>
<td>The filter to be used by the Windows OS File Opener dialog. This allows the user to see only files that match the given extension and thus pick a valid file.</td>
</tr>
<tr>
<td><code>PackageFileExtension</code></td>
<td>The file extension of the package to be imported into Trados Studio.</td>
</tr>
<tr>
<td><code>ReturnPackageFileExtension</code></td>
<td>The file extension of the return package.</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>The bellow sample provides a visual to the elements described above:</p>
<pre><code class="lang-cs">[ExternalPackageConvertorExtension(
    Id = &quot;Sdl.ProjectsOperations.Sample.SamplePackageConverter&quot;,
    Name = &quot;Sample Package Converter&quot;,
    Description = &quot;Sample Package Converter&quot;,
    PackageFileFilter = &quot;Sample Packages (*.zip)|*.zip&quot;,
    PackageFileExtension = &quot;.zip&quot;,
    ReturnPackageFileExtension = &quot;.zip&quot;)]
public class SamplePackageConverter : IExternalPackageConverter
{
    public SamplePackageConverter()
    {
    }

    public PackageConversionResult ConversionResult {get; private set;}

    public event EventHandler&lt;PackageConverterMessageEventArgs&gt; PackageMessage;
    public event EventHandler&lt;ConvertExternalPackageEventArgs&gt; PackageConverted;

    public void ConvertPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)
    {
        // your costum logic here
    }

    public void ConvertReturnPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)
    {
        // your custom logic here
    }
}
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>Open Package</strong> and <strong>Create Return Package</strong> wizard's <code>Data</code> object is available in the custom package converter as well, via the <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Packaging.ExternalPackageConversionInfo.html#Sdl_TranslationStudioAutomation_IntegrationApi_Packaging_ExternalPackageConversionInfo_CustomData">ExternalPackageConversionInfo.CustomData</a> property, allowing third party developers to use inside the converter data that has been captured in their custom wizard pages .</p>
</div>
<h2 id="importing-a-custom-package">Importing a custom package</h2>
<p>Importing a custom package is done by implementing the <code>ConvertPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)</code> method. The usual steps within the implementation are as follows:</p>
<ul>
<li><p>Unzipping the package</p>
</li>
<li><p>Creating an <a href="../../api/projectautomation/Sdl.ProjectAutomation.Core.IPackage.html">IPackage</a> object by calling the <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Packaging.IConversionContext.html#Sdl_TranslationStudioAutomation_IntegrationApi_Packaging_IConversionContext_CreatePackage_System_String_Sdl_Core_Globalization_Language_System_DateTime_System_String_System_Guid_">IConversionContext.CreatePackage</a> method. The parameters required here are as follows</p>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>projectName</code></td>
<td>The name of the final project to be imported.</td>
</tr>
<tr>
<td><code>sourceLanguage</code></td>
<td>The source language of the project to be imported.</td>
</tr>
<tr>
<td><code>createdAt</code></td>
<td>The <code>DateTime</code> creation details.</td>
</tr>
<tr>
<td><code>createdBy</code></td>
<td>The user who created the package.</td>
</tr>
<tr>
<td><code>originalProjectGuid</code></td>
<td>Pass this as <code>Guid.Empty</code> if this is the first time the project is imported into Trados Studio, otherwise pass the original project id. The presence of the project in Trados Studio can be determined by calling <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Packaging.IConversionContext.html#Sdl_TranslationStudioAutomation_IntegrationApi_Packaging_IConversionContext_CheckForExistingProject_System_Guid_">IConversionContext.CheckForExistingProject()</a></td>
</tr>
</tbody>
</table>
</li>
<li><p>Adding the resources to the package <a href="../../api/projectautomation/Sdl.ProjectAutomation.Core.IPackage.html">IPackage</a> object such as: files, translation memories, termbases, specific settings</p>
</li>
<li><p>Physically packaging the package into Trados Studio valid format by calling <a href="../../api/projectautomation/Sdl.ProjectAutomation.Core.IPackage.html#Sdl_ProjectAutomation_Core_IPackage_Pack_System_String_">IPackage.Pack()</a> and specifying the location where the package will be saved.</p>
</li>
<li><p>Performing cleanup on temporary resources used, such as files.</p>
</li>
</ul>
<pre><code class="lang-cs">public void ConvertPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)
{
    OnPackageConverted(0, &quot;Beginning conversion&quot;);

    try
    {
        var projectId = Guid.Empty;              
        var package = context.CreatePackage(&quot;SampleProject&quot;, 
                    new Language(&quot;en-us&quot;), DateTime.Now, &quot;sample_api&quot;, projectId);

        AddResourcesToPackage(package);

        package.Pack(&quot;C:\\SampleLocation\\sample_package.sdlppx&quot;);
    }
    finally
    {
        Cleanup();
    }
     
    OnPackageConverted(100, &quot;Conversion Completed&quot;);
}
</code></pre>
<h2 id="exporting-a-return-package-into-a-custom-format">Exporting a return package into a custom format</h2>
<p>Exporting a return package into a custom package is done by implementing the <code>ConvertReturnPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)</code> method. The usual steps within the implementation are as follows:</p>
<ul>
<li>Creating an <a href="../../api/projectautomation/Sdl.ProjectAutomation.Core.IPackage.html">IPackage</a> object from the return package file by calling the <a href="../../api/integration/Sdl.TranslationStudioAutomation.IntegrationApi.Packaging.IConversionContext.html#Sdl_TranslationStudioAutomation_IntegrationApi_Packaging_IConversionContext_OpenPackage_System_String_">IConversionContext.OpenPackage</a> method.</li>
<li>Extracting the necessary resources from the <a href="../../api/projectautomation/Sdl.ProjectAutomation.Core.IPackage.html">IPackage</a> object and creating the custom return package.</li>
<li>Performing cleanup on temporary resources used, such as files.</li>
</ul>
<pre><code class="lang-cs">public void ConvertReturnPackage(IConversionContext context, ExternalPackageConversionInfo externalPackageConversionInfo)
{
    OnPackageConverted(0, &quot;Beginning conversion&quot;);

    try
    {
        var fromPackage = context.OpenPackage(externalPackageConversionInfo.FromPackagePath);

        CreateCustomReturnPackage(fromPackage);
    }
    finally
    {
        Cleanup();
    }

    OnPackageConverted(100, &quot;Conversion Completed&quot;);
}
</code></pre>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/RWS/studio-api-docs/blob/main/apiconcepts/integration/process_custom_project_package_formats.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>