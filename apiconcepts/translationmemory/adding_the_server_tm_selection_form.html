<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Adding the Server TM Selection Form </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Adding the Server TM Selection Form ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <span class="glyphicon glyphicon-search search-icon"></span>
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar-default">
          <div class="container hide-when-search">
            <div class="breadcrumb-container" id="breadcrumb">
              <ul class="breadcrumb col-md-10">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="adding-the-server-tm-selection-form">Adding the Server TM Selection Form</h1>

<p>This page explains how to create the page for selecting the translation memory in which the concordance search is to be carried out. Users should be able to select one TM, which can either be file-based or server-based.</p>
<h2 id="add-the-form-control-elements">Add the Form Control Elements</h2>
<p>The form selecting the TM needs to have the following control elements:</p>
<ul>
<li><strong>groupBoxServerTM</strong>: group box that contains the three following elements:</li>
<li><strong>txtServerUri</strong>: text field for entering the server URI</li>
<li><strong>txtUserName</strong>: text field for entering the user name</li>
<li><strong>txtPassword</strong>: text field for entering the password (set the <em>PasswordChar</em> property to *)</li>
<li><strong>btnConnect</strong>: clicked to establish a connection to the TM Server; when successful, the combo list below will be enabled and filled with the TM names</li>
<li><strong>comboServerTMs</strong>: dropdown list that contains the server TM names after a successful server connection has been established; disabled by default, will be enabled and filled with the TM names if the <strong>Connect</strong> button above has been clicked and a server connection is available</li>
<li><strong>btnOK</strong>: by pressing this button the user closes the form, establishes a connection to the TM server, the TM gets selected, and the available language pairs are filled into the corresponding combo list of the main TM lookup form. This button is disabled by default, and only enabled, once the names of the available server TMs have been filled into the list above.</li>
<li><strong>btnCancel</strong>: closes the form without selecting a TM
All put together your form should look as shown below:</li>
</ul>
<p><img style="display:block; " src="images/frmSelectTM.jpg"></p>
<h2 id="implement-the-gui-functionality">Implement the GUI Functionality</h2>
<p>When the user presses the <strong>Cancel</strong> button, the form should be hidden:</p>
<div class="tabGroup" id="tabgroup_hsbBn3ZKd2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_hsbBn3ZKd2_tabid-1" role="tab" aria-controls="tabpanel_hsbBn3ZKd2_tabid-1" data-tab="tabid-1" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_hsbBn3ZKd2_tabid-1" role="tabpanel" data-tab="tabid-1">
<pre><code class="lang-cs">private void btnCancel_Click(object sender, EventArgs e)
{
    this.Close();
}
</code></pre></section>
</div>
<h3 id="connecting-to-the-tm-server-and-retrieving-the-tm-names">Connecting to the TM Server and Retrieving the TM Names</h3>
<p>By clicking the <strong>btnConnect</strong> button you establish an initial connection to the server. This connection is required for populating the <strong>comboServerTMs</strong> list with the server TM names and for enabling the list element. Also, the name of the first TM will be chosen by default.</p>
<div class="tabGroup" id="tabgroup_hsbBn3ZKd2-1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_hsbBn3ZKd2-1_tabid-2" role="tab" aria-controls="tabpanel_hsbBn3ZKd2-1_tabid-2" data-tab="tabid-2" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_hsbBn3ZKd2-1_tabid-2" role="tabpanel" data-tab="tabid-2">
<pre><code class="lang-cs">// By clicking the Connect button you establish a connectionw with the TM
// Server. This will fill populate the dropdown list with the names of the
// server TMs and enable the list, which is by default disabled.
// Moreover, the OK button gets enabled.
private void btnConnect_Click(object sender, EventArgs e)
{
    Connector connection = new Connector();
    connection.Connect(this.txtServerUri.Text, this.txtUserName.Text, 
        this.txtPassword.Text, this.comboServerTMs);

    this.btnOK.Enabled = true;
}
</code></pre></section>
</div>
<div class="NOTE"><h5>Note</h5><p>In this simple implementation we will not take into consideration cases in which the file name was left empty or is invalid.</p>
</div>
<h3 id="selecting-the-tm-for-the-search">Selecting the TM for the Search</h3>
<p>When the users presses the <strong>OK</strong> button, a connection to the TM Server is established, and the form is closed. The TM name will be filled into the corresponding text box of the main application form. Note that the TM name is composed of the server URI and the actual TM name. Note that server TMs can have more than one language direction. We leverage the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.ServerBasedTranslationMemory.html#Sdl_LanguagePlatform_TranslationMemoryApi_ServerBasedTranslationMemory_LanguageDirections">LanguageDirections</a> property to traverse the available language directions, and propagate the language pairs into the corresponding list of the main application form. The first available language direction should be selected by default.</p>
<div class="tabGroup" id="tabgroup_hsbBn3ZKd2-2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_hsbBn3ZKd2-2_tabid-3" role="tab" aria-controls="tabpanel_hsbBn3ZKd2-2_tabid-3" data-tab="tabid-3" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_hsbBn3ZKd2-2_tabid-3" role="tabpanel" data-tab="tabid-3">
<pre><code class="lang-cs">// By clicking OK the user connects the server-based TM
// through the Connector class.
// The TM language directions are propagated into the corresponding list of the frmLookup form.
private void btnOK_Click(object sender, EventArgs e)
{
    // Establish a connection to the TM Server.
    Connector connect = new Connector();

    connect.SelectServerTm(this.comboServerTMs.Text, this.txtServerUri.Text,
            this.txtUserName.Text, this.txtPassword.Text);

    // Enter the TM URI and TM name into the main application form.
    frmLookup lookupFrm = new frmLookup();
    lookupFrm.txtTmPath.Text = Connector.serverTM.Uri.ToString();            

    // Loop throught the available language directions of the selected TM and fill them
    // into the corresponding list in the main application form.
    lookupFrm.comboLanguagePairs.Items.Clear();
    for (int i = 0; i &lt; Connector.serverTM.LanguageDirections.Count; i++)
    {
        string srcLang = Connector.serverTM.LanguageDirections[i].SourceLanguage.DisplayName;
        string trgLang = Connector.serverTM.LanguageDirections[i].TargetLanguage.DisplayName;
        lookupFrm.comboLanguagePairs.Items.Add(srcLang + &quot; -&gt; &quot; + trgLang);
    }

    // Select the first available language direction.
    string currentSrcLang = Connector.serverTM.LanguageDirections[0].SourceLanguage.DisplayName;
    string currentTrgLang = Connector.serverTM.LanguageDirections[0].TargetLanguage.DisplayName;
    lookupFrm.comboLanguagePairs.Text = currentSrcLang + &quot; -&gt; &quot; + currentTrgLang;

    lookupFrm.Show();
    this.Close();
}
</code></pre></section>
</div>
<h2 id="see-also">See Also</h2>
<p><a href="adding_the_search_settings_form.html">Adding the Search Settings Form</a></p>
<p><a href="adding_the_connector_class.html">Adding the Connector Class</a></p>
<p><a href="implementing_the_search_functionality.html">Implementing the Search Functionality</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/RWS/studio-api-docs/blob/main/apiconcepts/translationmemory/adding_the_server_tm_selection_form.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h4>On this page</h4>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
