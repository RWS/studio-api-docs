<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating a Server Translation Memory </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating a Server Translation Memory ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <span class="glyphicon glyphicon-search search-icon"></span>
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar-default">
          <div class="container hide-when-search">
            <div class="breadcrumb-container" id="breadcrumb">
              <ul class="breadcrumb col-md-10">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="creating-a-server-translation-memory">Creating a Server Translation Memory</h1>

<p>Server translation memories can either be created in Trados Studio or in the browser-based TM Server Manager (provided that you have the required access rights). In this chapter you will learn how to create server TMs programmatically, which is probably one of the most common applications.</p>
<h2 id="add-a-new-class">Add a New Class</h2>
<p>The screenshot below illustrates what kind of information you need to provide when creating a new server TM from Trados Studio. Some information is optional such as the description and the copyright information. The mandatory information that you need to provide is a follows:</p>
<ul>
<li>TM name</li>
<li>TM Server name</li>
<li>Container database</li>
<li>Organization (default is Root Organization)</li>
<li>Language direction</li>
</ul>
<p><img style="display:block; " src="images/CreateServerTM.jpg"></p>
<p>To create a server TM programmatically, start by adding a new class called <code>ServerTmCreator</code>. Then implement a function called <code>Create</code>, which takes a TM Server object and the name of the TM to create as parameters.</p>
<h2 id="check-if-the-tm-already-exists">Check if the TM Already Exists</h2>
<p>As it is not allowed to create a TM with a name that exists already, you should also check whether the TM you are trying to create is already present on the server. To make your script robust, loop through the available TMs on the server, and then throw an error if a TM with the same name already exists.</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4_tabid-1" role="tab" aria-controls="tabpanel_RIMpy9AxT4_tabid-1" data-tab="tabid-1" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4_tabid-1" role="tabpanel" data-tab="tabid-1">
<pre><code class="lang-cs">foreach (ServerBasedTranslationMemory item in tmServer.GetTranslationMemories(TranslationMemoryProperties.None))
{
    if (item.Name == tmName)
    {
        throw new Exception(&quot;TM with that name already exists.&quot;);
    }
}
</code></pre></section>
</div>
<h2 id="assign-the-tm-properties">Assign the TM Properties</h2>
<p>After you have made certain that a TM with that name does not exist yet, use the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.ServerBasedTranslationMemory.html">ServerBasedTranslationMemory</a> class to create a new server TM object. Then assign the TM properties, i.e. the name and the (optional) description and copyright information:</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-1_tabid-2" role="tab" aria-controls="tabpanel_RIMpy9AxT4-1_tabid-2" data-tab="tabid-2" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-1_tabid-2" role="tabpanel" data-tab="tabid-2">
<pre><code class="lang-cs">ServerBasedTranslationMemory newTM = new ServerBasedTranslationMemory(tmServer);
newTM.Name = tmName;
newTM.Description = &quot;Programmatically created sample TM&quot;;
newTM.Copyright = &quot;(c) 2021 RWS Group&quot;;
</code></pre></section>
</div>
<h2 id="select-the-container">Select the Container</h2>
<p>In the next step, select the container database in which the new TM should be created. To do this retrieve the containers available on the TM Server. The container is referenced by using the nice name and the container properties as parameters.</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-2_tabid-3" role="tab" aria-controls="tabpanel_RIMpy9AxT4-2_tabid-3" data-tab="tabid-3" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-2_tabid-3" role="tabpanel" data-tab="tabid-3">
<pre><code class="lang-cs">containerPath += containerName;
TranslationMemoryContainer container = tmServer.GetContainer(containerPath, this.GetContainerProperties());
newTM.Container = container;
</code></pre></section>
</div>
<p>The container properties are returned by a separate function:</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-3_tabid-4" role="tab" aria-controls="tabpanel_RIMpy9AxT4-3_tabid-4" data-tab="tabid-4" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-3_tabid-4" role="tabpanel" data-tab="tabid-4">
<pre><code class="lang-cs">private ContainerProperties GetContainerProperties()
{
    ContainerProperties props = new ContainerProperties();

    return props;
}
</code></pre></section>
</div>
<h2 id="select-the-language-direction">Select the Language Direction</h2>
<p>Now assign the language direction, e.g. English -&gt; German <em>(en-US -&gt; de-DE)</em>:</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-4_tabid-5" role="tab" aria-controls="tabpanel_RIMpy9AxT4-4_tabid-5" data-tab="tabid-5" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-4_tabid-5" role="tabpanel" data-tab="tabid-5">
<pre><code class="lang-cs">this.CreateLanguageDirections(newTM.LanguageDirections);
</code></pre></section>
</div>
<p>The creation of the language direction is done in a separate function. Here, you set the locales of the source and target languages, i.e. <em>en-US</em> and <em>de-DE</em>. This language direction is then added to the language direction collection, which, in turn, is then assigned to the TM.</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-5_tabid-6" role="tab" aria-controls="tabpanel_RIMpy9AxT4-5_tabid-6" data-tab="tabid-6" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-5_tabid-6" role="tabpanel" data-tab="tabid-6">
<pre><code class="lang-cs">private void CreateLanguageDirections(ServerBasedTranslationMemoryLanguageDirectionCollection directionsCollection)
{
    ServerBasedTranslationMemoryLanguageDirection direction = new ServerBasedTranslationMemoryLanguageDirection();
    direction.SourceLanguage = CultureInfo.GetCultureInfo(&quot;en-US&quot;);
    direction.TargetLanguage = CultureInfo.GetCultureInfo(&quot;de-DE&quot;);

    directionsCollection.Add(direction);
}
</code></pre></section>
</div>
<p>Note that while file-based translation memories can only be bilingual, server TMs can be multilingual. This means that you can add multiple directions to the languages directions collection. However, in this example we only add one direction to the language directions collection.</p>
<h2 id="field-and-language-resources-templates">Field and Language Resources Templates</h2>
<p>When creating a TM you can select a field and language resources template. Field templates store the fields that can be added to a TU (e.g. <em>Customer, Project id</em>, etc.). Language resource templates can store custom abbreviation lists, variables, etc. For more information on these kinds of templates, please see <a href="configuring_translation_memories.html">Configuring Translation Memories</a>. In order to select a fields template during creation of a TM, you need to apply the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationProviderServer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationProviderServer_GetFieldsTemplates_Sdl_LanguagePlatform_TranslationMemoryApi_FieldsTemplateProperties_System_Boolean_">GetFieldsTemplates</a> method to the TM server object. This method requires the template name and the template properties (<a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.FieldsTemplateProperties.html">FieldsTemplateProperties</a>) as parameters. In the same way you can select the language resources templates by applying the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationProviderServer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationProviderServer_GetLanguageResourcesTemplates_Sdl_LanguagePlatform_TranslationMemoryApi_LanguageResourcesTemplateProperties_System_Boolean_">GetLanguageResourcesTemplates</a> method, which also takes the template name and the template properties (<a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.LanguageResourcesTemplateProperties.html">LanguageResourcesTemplateProperties</a>) as parameters
:</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-6_tabid-7" role="tab" aria-controls="tabpanel_RIMpy9AxT4-6_tabid-7" data-tab="tabid-7" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-6_tabid-7" role="tabpanel" data-tab="tabid-7">
<pre><code class="lang-cs">string sampleFieldTemplateName = &quot;MyFieldTemplate&quot;;
foreach (ServerBasedFieldsTemplate template in tmServer.GetFieldsTemplates(FieldsTemplateProperties.All))
{
    if (template.Name == sampleFieldTemplateName)
    {
        newTM.FieldsTemplate = tmServer.GetFieldsTemplate(
            templatePath + sampleFieldTemplateName, FieldsTemplateProperties.Fields);
        break;
    }
}

string sampleLanguageResourcesTemplateName = &quot;MyLanguageResourcesTemplate&quot;;
foreach (ServerBasedLanguageResourcesTemplate template in tmServer.GetLanguageResourcesTemplates(
    LanguageResourcesTemplateProperties.LanguageResources))
{
    if (template.Name == sampleLanguageResourcesTemplateName)
    {
        newTM.LanguageResourcesTemplate = tmServer.GetLanguageResourcesTemplate(
            templatePath + sampleLanguageResourcesTemplateName, LanguageResourcesTemplateProperties.None);
        break;
    }
}
</code></pre></section>
</div>
<div class="NOTE"><h5>Note</h5><p>Field templates are only available for server TMs. For file-based TMs, fields need to be configured for each TM individually, and cannot be centralized in a field template.</p>
</div>
<h2 id="select-the-organization">Select the Organization</h2>
<p>TMs are assigned to organizations, by default the <em>Root Organization</em>. Organizations make it easier to manage large numbers of TMs. For example, if you want to create TMs for a specific customer, you can first define an organization called e.g. <em>Microsoft</em>, and then create all Microsoft-related TMs within this organization. It is also possible to define that only particular users should have access to this organization, and thus to the TMs created therein. In our implementation we create the new TM within the <em>organization</em> passed in through the organization parameter.</p>
<div class="NOTE"><h5>Note</h5><p>If you have not defined organizations, and want to use the Root Organization, the path would simply be:
 /</p>
<p>If you take a <em>sub-ordinate organization</em>, the path to the organization would look as follows:</p>
<p>/<em>My Company</em></p>
<p>If an organization has sub-organizations (e.g. a company further
sub-divides into departments), the path would look as shown below:</p>
<p>/<em>My Company/Marketing</em></p>
</div>
<h2 id="delete-the-translation-memory">Delete the Translation Memory</h2>
<p>Of course, it is also possible to delete server TMs when they are no longer required. Note that this is a dangerous operation, as this will physically delete potentially valuable data. Unless a backup is available, the deleted TM data can no longer be restored. The sample function below opens a server TM and then applies the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.ServerBasedTranslationMemory.html#Sdl_LanguagePlatform_TranslationMemoryApi_ServerBasedTranslationMemory_Delete">Delete</a> method to delete the TM from the server. Note that a TM can only be deleted by a user who has the necessary credentials.</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-7">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-7_tabid-8" role="tab" aria-controls="tabpanel_RIMpy9AxT4-7_tabid-8" data-tab="tabid-8" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-7_tabid-8" role="tabpanel" data-tab="tabid-8">
<pre><code class="lang-cs">public void DeleteTm(TranslationProviderServer tmServer, string organizationPath, string tmName)
{
    string tmPath = organizationPath;
    if (!tmPath.EndsWith(&quot;/&quot;))
        tmPath += &quot;/&quot;;

    ServerBasedTranslationMemory tm = tmServer.GetTranslationMemory(tmPath + tmName, TranslationMemoryProperties.All);
    tm.Delete();
}
</code></pre></section>
</div>
<h2 id="putting-it-all-together">Putting it All Together</h2>
<p>The complete class should now look as shown below:</p>
<div class="tabGroup" id="tabgroup_RIMpy9AxT4-8">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_RIMpy9AxT4-8_tabid-9" role="tab" aria-controls="tabpanel_RIMpy9AxT4-8_tabid-9" data-tab="tabid-9" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_RIMpy9AxT4-8_tabid-9" role="tabpanel" data-tab="tabid-9">
<pre><code class="lang-cs">namespace SDK.LanguagePlatform.Samples.TmAutomation
{
    using System;
    using System.Globalization;
    using Sdl.LanguagePlatform.TranslationMemoryApi;

    public class ServerTmCreator
    {
        #region &quot;create&quot;
        public void Create(TranslationProviderServer tmServer, string organizationPath, string containerName, string tmName)
        {
            #region &quot;CheckExists&quot;
            foreach (ServerBasedTranslationMemory item in tmServer.GetTranslationMemories(TranslationMemoryProperties.None))
            {
                if (item.Name == tmName)
                {
                    throw new Exception(&quot;TM with that name already exists.&quot;);
                }
            }
            #endregion

            #region &quot;TM&quot;
            ServerBasedTranslationMemory newTM = new ServerBasedTranslationMemory(tmServer);
            newTM.Name = tmName;
            newTM.Description = &quot;Programmatically created sample TM&quot;;
            newTM.Copyright = &quot;(c) 2021 RWS Group&quot;;
            #endregion

            string containerPath = organizationPath;
            if (!containerPath.EndsWith(&quot;/&quot;))
                containerPath += &quot;/&quot;;

            #region &quot;container&quot;
            containerPath += containerName;
            TranslationMemoryContainer container = tmServer.GetContainer(containerPath, this.GetContainerProperties());
            newTM.Container = container;
            #endregion

            #region &quot;LanguageDirection&quot;
            this.CreateLanguageDirections(newTM.LanguageDirections);
            #endregion

            #region &quot;org&quot;
            newTM.ParentResourceGroupPath = organizationPath;
            #endregion

            string templatePath = organizationPath;
            if (!templatePath.EndsWith(&quot;/&quot;))
                templatePath += &quot;/&quot;;

            #region &quot;templates&quot;
            string sampleFieldTemplateName = &quot;MyFieldTemplate&quot;;
            foreach (ServerBasedFieldsTemplate template in tmServer.GetFieldsTemplates(FieldsTemplateProperties.All))
            {
                if (template.Name == sampleFieldTemplateName)
                {
                    newTM.FieldsTemplate = tmServer.GetFieldsTemplate(
                        templatePath + sampleFieldTemplateName, FieldsTemplateProperties.Fields);
                    break;
                }
            }

            string sampleLanguageResourcesTemplateName = &quot;MyLanguageResourcesTemplate&quot;;
            foreach (ServerBasedLanguageResourcesTemplate template in tmServer.GetLanguageResourcesTemplates(
                LanguageResourcesTemplateProperties.LanguageResources))
            {
                if (template.Name == sampleLanguageResourcesTemplateName)
                {
                    newTM.LanguageResourcesTemplate = tmServer.GetLanguageResourcesTemplate(
                        templatePath + sampleLanguageResourcesTemplateName, LanguageResourcesTemplateProperties.None);
                    break;
                }
            }
            #endregion


            newTM.Save();
        }
        #endregion

        #region &quot;ContainerProps&quot;
        private ContainerProperties GetContainerProperties()
        {
            ContainerProperties props = new ContainerProperties();

            return props;
        }
        #endregion

        #region &quot;languages&quot;
        private void CreateLanguageDirections(ServerBasedTranslationMemoryLanguageDirectionCollection directionsCollection)
        {
            ServerBasedTranslationMemoryLanguageDirection direction = new ServerBasedTranslationMemoryLanguageDirection();
            direction.SourceLanguage = CultureInfo.GetCultureInfo(&quot;en-US&quot;);
            direction.TargetLanguage = CultureInfo.GetCultureInfo(&quot;de-DE&quot;);

            directionsCollection.Add(direction);
        }
        #endregion

        #region &quot;DeleteTm&quot;
        public void DeleteTm(TranslationProviderServer tmServer, string organizationPath, string tmName)
        {
            string tmPath = organizationPath;
            if (!tmPath.EndsWith(&quot;/&quot;))
                tmPath += &quot;/&quot;;

            ServerBasedTranslationMemory tm = tmServer.GetTranslationMemory(tmPath + tmName, TranslationMemoryProperties.All);
            tm.Delete();
        }
        #endregion
    }
}
</code></pre></section>
</div>
<h2 id="see-also">See Also</h2>
<p><a href="retrieving_database_servers.html">Retrieving Database Servers</a></p>
<p><a href="retrieving_tm_containers.html">Retrieving TM Containers</a></p>
<p><a href="creating_a_container_database.html">Creating a Container Database</a></p>
<p><a href="creating_a_file_based_translation_memory.html">Creating a File-based Translation Memory</a></p>
<p><a href="configuring_translation_memories.html">Configuring Translation Memories</a></p>
<p><a href="tm_fields_templates.html">TM Fields Templates</a></p>
<p><a href="language_resource_templates.html">Language Resource Templates</a></p>
<p><a href="adding_tm_fields.html">Adding TM Fields</a></p>
<p><a href="adding_language_resources.html">Adding Language Resources</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/RWS/studio-api-docs/blob/main/apiconcepts/translationmemory/creating_a_server_translation_memory.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h4>On this page</h4>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
