<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating a Container Database </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating a Container Database ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <span class="glyphicon glyphicon-search search-icon"></span>
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar-default">
          <div class="container hide-when-search">
            <div class="breadcrumb-container" id="breadcrumb">
              <ul class="breadcrumb col-md-10">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="creating-a-container-database">Creating a Container Database</h1>

<p>In this chapter you will learn how to programmatically create a container on a database server for storing translation memories.</p>
<h2 id="add-a-new-class">Add a New Class</h2>
<p>Start by adding a new class called <code>ServerContainer</code>. Then implement a public Create function, which takes a <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationProviderServer.html">TranslationProviderServer</a> object as parameter. The function should look as shown below:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4_tabid-1" role="tab" aria-controls="tabpanel_TaWDKcKzD4_tabid-1" data-tab="tabid-1" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4_tabid-1" role="tabpanel" data-tab="tabid-1">
<pre><code class="lang-cs">public void Create(TranslationProviderServer tmServer)
{
    TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);

    DatabaseServer dbServ = tmServer.GetDatabaseServer(&quot;DB01&quot;, this.GetDbServProperties());
    container.DatabaseServer = dbServ;
    container.DatabaseName = &quot;DbName&quot;;
    container.Name = &quot;NiceName&quot;;
    container.Save();
}
</code></pre></section>
</div>
<p>First, we create the database server object from the TM Server. For this, the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationProviderServer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationProviderServer_GetDatabaseServer_System_Guid_Sdl_LanguagePlatform_TranslationMemoryApi_DatabaseServerProperties_">GetDatabaseServer</a> method is applied, which takes the (friendly) database server name and the database server properties as parameters. The database server properties are returned by function that is shown below. Note that this function has been simplified for our sample implementation. It actually returns only an empty property, however, we need it to provide the required parameter for the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationProviderServer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationProviderServer_GetDatabaseServer_System_Guid_Sdl_LanguagePlatform_TranslationMemoryApi_DatabaseServerProperties_">GetDatabaseServer</a> method.</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-1_tabid-2" role="tab" aria-controls="tabpanel_TaWDKcKzD4-1_tabid-2" data-tab="tabid-2" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-1_tabid-2" role="tabpanel" data-tab="tabid-2">
<pre><code class="lang-cs">private DatabaseServerProperties GetDbServProperties()
{
    DatabaseServerProperties props = new DatabaseServerProperties();

    return props;
}
</code></pre></section>
</div>
<p>When creating the container we specify the</p>
<ul>
<li>database server object</li>
<li>physical database name (note that this name is subject to DB naming conventions)</li>
<li>friendly name for the container database</li>
</ul>
<p>Afterwards, we apply the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationMemoryContainer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationMemoryContainer_Save">Save</a> method, which creates the actual container database. The complete function should look as shown below:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-2_tabid-3" role="tab" aria-controls="tabpanel_TaWDKcKzD4-2_tabid-3" data-tab="tabid-3" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-2_tabid-3" role="tabpanel" data-tab="tabid-3">
<pre><code class="lang-cs">public void Create(TranslationProviderServer tmServer)
{
    TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);

    DatabaseServer dbServ = tmServer.GetDatabaseServer(&quot;DB01&quot;, this.GetDbServProperties());
    container.DatabaseServer = dbServ;
    container.DatabaseName = &quot;DbName&quot;;
    container.Name = &quot;NiceName&quot;;
    container.Save();
}
</code></pre></section>
</div>
<h2 id="enhance-the-code-example">Enhance the Code Example</h2>
<p>In the next step we would like to show to you how to enhance the function for creating containers. Add a new function called <code>CreateAdvanced</code> to your class, which takes a TM Server object and the container database name as parameters. The aim is to make the function for creating the container more robust by first checking whether the TM Server has any database servers registered in the first place. To do this determine the number of available database servers. If the count equals zero, an error message should be thrown:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-3_tabid-4" role="tab" aria-controls="tabpanel_TaWDKcKzD4-3_tabid-4" data-tab="tabid-4" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-3_tabid-4" role="tabpanel" data-tab="tabid-4">
<pre><code class="lang-cs">ReadOnlyCollection&lt;DatabaseServer&gt; dbs = tmServer.GetDatabaseServers(DatabaseServerProperties.Containers);
if (dbs.Count == 0)
{
    throw new Exception(&quot;No DB server registered.&quot;);
}
</code></pre></section>
</div>
<p>Afterwards, check whether a container with the name that we want to give already exists on the first available database server. For simplicity reasons we are just checking the first database server, as we can assume that most TM Server setups bank on only a single DB server.</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-4_tabid-5" role="tab" aria-controls="tabpanel_TaWDKcKzD4-4_tabid-5" data-tab="tabid-5" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-4_tabid-5" role="tabpanel" data-tab="tabid-5">
<pre><code class="lang-cs">foreach (TranslationMemoryContainer item in dbs[0].Containers)
{
    if (item.Name == newContainerName)
    {
        throw new Exception(&quot;Container with that name already exists.&quot;);
    }
}
</code></pre></section>
</div>
<p>If at least one database server is available, and a container by that name does not exist yet, we create the container on the database server:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-5_tabid-6" role="tab" aria-controls="tabpanel_TaWDKcKzD4-5_tabid-6" data-tab="tabid-6" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-5_tabid-6" role="tabpanel" data-tab="tabid-6">
<pre><code class="lang-cs">TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);
container.DatabaseServer = dbs[0];
container.DatabaseName = newContainerName + &quot;DB&quot;;
container.Name = newContainerName;
container.ParentResourceGroupPath = organization;
container.Save();
</code></pre></section>
</div>
<p>Last, check whether the container was actually created by applying the <code>Contains</code> method to the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.DatabaseServer.html#Sdl_LanguagePlatform_TranslationMemoryApi_DatabaseServer_Containers">Containers</a> collection. If the container object was not found on the first available database server, an error message should be thrown:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-6_tabid-7" role="tab" aria-controls="tabpanel_TaWDKcKzD4-6_tabid-7" data-tab="tabid-7" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-6_tabid-7" role="tabpanel" data-tab="tabid-7">
<pre><code class="lang-cs">if (!dbs[0].Containers.Contains(container))
{
    throw new Exception(&quot;Container was not created.&quot;);
}
</code></pre></section>
</div>
<p>The complete function should look as shown below:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-7">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-7_tabid-8" role="tab" aria-controls="tabpanel_TaWDKcKzD4-7_tabid-8" data-tab="tabid-8" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-7_tabid-8" role="tabpanel" data-tab="tabid-8">
<pre><code class="lang-cs">public void CreateAdvanced(TranslationProviderServer tmServer, string organization, string newContainerName)
{
    #region &quot;count&quot;
    ReadOnlyCollection&lt;DatabaseServer&gt; dbs = tmServer.GetDatabaseServers(DatabaseServerProperties.Containers);
    if (dbs.Count == 0)
    {
        throw new Exception(&quot;No DB server registered.&quot;);
    }
    #endregion

    #region &quot;CheckExists&quot;
    foreach (TranslationMemoryContainer item in dbs[0].Containers)
    {
        if (item.Name == newContainerName)
        {
            throw new Exception(&quot;Container with that name already exists.&quot;);
        }
    }
    #endregion

    #region &quot;CreateContainer&quot;
    TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);
    container.DatabaseServer = dbs[0];
    container.DatabaseName = newContainerName + &quot;DB&quot;;
    container.Name = newContainerName;
    container.ParentResourceGroupPath = organization;
    container.Save();
    #endregion

    #region &quot;CheckCreated&quot;
    if (!dbs[0].Containers.Contains(container))
    {
        throw new Exception(&quot;Container was not created.&quot;);
    }
    #endregion
}
</code></pre></section>
</div>
<h2 id="delete-a-container">Delete a Container</h2>
<p>The short sample function below demonstrates how to remove a container database from the TM Server system by applying the <a href="../../api/translationmemory/Sdl.LanguagePlatform.TranslationMemoryApi.TranslationMemoryContainer.html#Sdl_LanguagePlatform_TranslationMemoryApi_TranslationMemoryContainer_Delete_System_Boolean_">Delete</a> method. This method takes a boolean parameter to indicate whether the actual physical container database should be deleted (True), or whether the database should only be unregistered from the system (False). Note that deleting the physical database represents a risk, as it may contain a lot of valuable data. Therefore, unregistering the database is the safer option, as it can be re-registered later. This method should only be applied when you are absolutely certain that the database content is no longer needed. Note that the delete operation can only be performed by a user who has the required credentials.</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-8">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-8_tabid-9" role="tab" aria-controls="tabpanel_TaWDKcKzD4-8_tabid-9" data-tab="tabid-9" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-8_tabid-9" role="tabpanel" data-tab="tabid-9">
<pre><code class="lang-cs">public void DeleteContainer(TranslationProviderServer tmServer, string organization, string containerName)
{
    if (!organization.EndsWith(&quot;/&quot;)) 
        organization += &quot;/&quot;;
    TranslationMemoryContainer container = tmServer.GetContainer(organization + containerName, ContainerProperties.None);
    container.Delete(false);
}
</code></pre></section>
</div>
<h2 id="putting-it-all-together">Putting it All Together</h2>
<p>The complete class should now look as shown below:</p>
<div class="tabGroup" id="tabgroup_TaWDKcKzD4-9">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_TaWDKcKzD4-9_tabid-10" role="tab" aria-controls="tabpanel_TaWDKcKzD4-9_tabid-10" data-tab="tabid-10" tabindex="0" aria-selected="true">C#</a>
</li>
</ul>
<section id="tabpanel_TaWDKcKzD4-9_tabid-10" role="tabpanel" data-tab="tabid-10">
<pre><code class="lang-cs">namespace SDK.LanguagePlatform.Samples.TmAutomation
{
    using System;
    using System.Collections.ObjectModel;
    using Sdl.LanguagePlatform.TranslationMemoryApi;

    public class ServerContainer
    {
        #region &quot;CreateSimple&quot;
        public void Create(TranslationProviderServer tmServer)
        {
            TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);

            DatabaseServer dbServ = tmServer.GetDatabaseServer(&quot;DB01&quot;, this.GetDbServProperties());
            container.DatabaseServer = dbServ;
            container.DatabaseName = &quot;DbName&quot;;
            container.Name = &quot;NiceName&quot;;
            container.Save();
        }
        #endregion

        #region &quot;props&quot;
        private DatabaseServerProperties GetDbServProperties()
        {
            DatabaseServerProperties props = new DatabaseServerProperties();

            return props;
        }
        #endregion

        #region &quot;CreateAdvanced&quot;
        public void CreateAdvanced(TranslationProviderServer tmServer, string organization, string newContainerName)
        {
            #region &quot;count&quot;
            ReadOnlyCollection&lt;DatabaseServer&gt; dbs = tmServer.GetDatabaseServers(DatabaseServerProperties.Containers);
            if (dbs.Count == 0)
            {
                throw new Exception(&quot;No DB server registered.&quot;);
            }
            #endregion

            #region &quot;CheckExists&quot;
            foreach (TranslationMemoryContainer item in dbs[0].Containers)
            {
                if (item.Name == newContainerName)
                {
                    throw new Exception(&quot;Container with that name already exists.&quot;);
                }
            }
            #endregion

            #region &quot;CreateContainer&quot;
            TranslationMemoryContainer container = new TranslationMemoryContainer(tmServer);
            container.DatabaseServer = dbs[0];
            container.DatabaseName = newContainerName + &quot;DB&quot;;
            container.Name = newContainerName;
            container.ParentResourceGroupPath = organization;
            container.Save();
            #endregion

            #region &quot;CheckCreated&quot;
            if (!dbs[0].Containers.Contains(container))
            {
                throw new Exception(&quot;Container was not created.&quot;);
            }
            #endregion
        }
        #endregion

        #region &quot;DeleteContainer&quot;
        public void DeleteContainer(TranslationProviderServer tmServer, string organization, string containerName)
        {
            if (!organization.EndsWith(&quot;/&quot;)) 
                organization += &quot;/&quot;;
            TranslationMemoryContainer container = tmServer.GetContainer(organization + containerName, ContainerProperties.None);
            container.Delete(false);
        }
        #endregion
    }
}
</code></pre></section>
</div>
<h2 id="see-also">See Also</h2>
<p><a href="retrieving_tm_containers.html">Retrieving TM Containers</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/RWS/studio-api-docs/blob/main/apiconcepts/translationmemory/creating_a_container_database.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h4>On this page</h4>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
